# DocuVerse 에디터 라이브러리 개발 로드맵
## 순수 에디터 코어 기능 개발

### 개발 목표
- **순수 에디터 엔진**: 문서 작성/편집 기능에만 집중
- **MIT 라이센스**: 오픈소스 라이브러리로 배포
- **프레임워크 독립적**: 바닐라 JS로 개발, 어떤 환경에서든 사용 가능
- **최소한의 의존성**: 필수 기능만 포함한 경량 라이브러리

## 1단계: 라이브러리 기반 구조 설정 (2주)

### 1.1 프로젝트 구조
```
docuverse-editor/
├── src/
│   ├── core/                 # 핵심 에디터 엔진
│   ├── parsers/              # 문법 파서들
│   │   ├── markdown/         # 마크다운 파서
│   │   └── namuwiki/         # 나무위키 파서
│   ├── table/                # 고급 표 엔진
│   └── utils/                # 유틸리티 함수들
├── dist/                     # 빌드 결과물
├── examples/                 # 기본 사용 예제
└── docs/                     # API 문서
```

### 1.2 개발 환경
- **TypeScript**: 타입 안전성 및 개발 편의성
- **Rollup**: 라이브러리 번들링
- **Jest**: 단위 테스트
- **ESLint + Prettier**: 코드 품질 관리

### 1.3 배포 형태
- **NPM 패키지**: `docuverse-editor`
- **UMD 번들**: 브라우저에서 직접 사용
- **ESM 모듈**: 모던 번들러 지원
- **TypeScript 정의**: 완전한 타입 지원

## 2단계: 핵심 에디터 엔진 개발 (4주)

### 2.1 에디터 코어 구현
- **ProseMirror 기반**: 문서 편집의 핵심 엔진
- **문서 모델**: 구조화된 문서 표현 및 조작
- **변경 사항 추적**: 실행 취소/다시 실행 시스템
- **명령어 시스템**: 텍스트 편집, 서식 적용 등 기본 명령어

### 2.2 기본 텍스트 편집
- **서식 지원**: 굵게, 기울임, 밑줄, 취소선
- **색상 지원**: 텍스트 색상, 배경색 개별 설정
- **폰트 제어**: 폰트 종류, 크기 변경
- **단락 서식**: 정렬, 들여쓰기, 줄 간격

### 2.3 입력 처리
- **키보드 입력**: 기본 편집 동작 및 단축키
- **마우스 조작**: 클릭, 드래그, 선택 등
- **붙여넣기 처리**: 다양한 형태의 붙여넣기 데이터 처리

## 3단계: 마크다운 지원 구현 (3주)

### 3.1 마크다운 파서
- **기본 문법**: 제목, 강조, 목록, 링크, 코드 블록
- **확장 문법**: 표, 체크박스, 각주 등 GFM 지원
- **양방향 변환**: 마크다운 텍스트 ↔ 에디터 문서 구조

### 3.2 실시간 렌더링
- **타이핑 중 변환**: 마크다운 문법 입력 시 즉시 서식 적용
- **혼합 모드**: 마크다운과 리치 텍스트 편집 동시 지원
- **소스 보기**: 원본 마크다운 텍스트 확인 기능

### 3.3 코드 블록 특별 처리
- **구문 강조**: 프로그래밍 언어별 구문 강조
- **코드 편집**: 코드 블록 내 전용 편집 환경
- **언어 선택**: 코드 블록 언어 설정 UI

## 4단계: 나무위키 문법 시스템 (4주)

### 4.1 나무위키 파서 개발
- **고유 문법**: 나무위키만의 특별한 마크업 문법
- **제목 체계**: `= 제목 =`, `== 부제목 ==` 등
- **텍스트 서식**: `'''굵게'''`, `''기울임''`, `~~취소선~~` 등
- **링크 시스템**: `[[링크]]`, `[[링크|표시텍스트]]` 등

### 4.2 고급 나무위키 기능
- **접기/펼치기**: `{{{#!folding 제목` 문법 지원
- **각주 시스템**: `[* 각주내용]` 자동 번호 매기기
- **인용문**: `> 인용문` 및 중첩 인용문
- **목차 생성**: 제목 구조 기반 자동 목차

### 4.3 나무위키 ↔ 마크다운 호환
- **하이브리드 지원**: 두 문법 동시 사용 가능
- **변환 기능**: 나무위키 ↔ 마크다운 상호 변환
- **문법 우선순위**: 충돌 시 처리 규칙

## 5단계: 고급 표 시스템 개발 (6주)

### 5.1 나무위키 표 문법
- **기본 표 구조**: `||셀1||셀2||` 형태 파싱
- **셀 병합**: `||<rowspan=2>병합셀||`, `||<colspan=3>병합||`
- **셀 스타일**: `||<bgcolor=#ff0000>배경색||`, `||<color=blue>글자색||`
- **정렬 옵션**: `||<:>가운데||`, `||<(>왼쪽||`, `||<)>오른쪽||`

### 5.2 엑셀 스타일 기능 통합
- **수식 시스템**: `=SUM(A1:A10)`, `=AVERAGE(B1:B5)` 등
- **셀 참조**: A1, B2 형태의 절대/상대 참조
- **기본 함수**: SUM, AVERAGE, COUNT, MAX, MIN, IF 등
- **자동 계산**: 참조 셀 변경 시 의존 수식 자동 업데이트

### 5.3 데이터 타입 및 포맷팅
- **숫자 포맷**: 천 단위 구분자, 소수점 자리수
- **날짜 포맷**: 다양한 날짜 표시 형식
- **통화 포맷**: 원화, 달러 등 통화 표시
- **백분율**: 퍼센트 표시 및 계산

### 5.4 조건부 서식
- **값 기반 서식**: 특정 값 범위에 따른 색상 변경
- **데이터 막대**: 셀 내 값 비율을 막대로 표시
- **색상 척도**: 값의 크기에 따른 그라데이션 색상
- **아이콘 세트**: 값 범위별 아이콘 표시

### 5.5 표 편집 인터페이스
- **시각적 편집**: 드래그로 행/열 크기 조절
- **행/열 조작**: 삽입, 삭제, 이동
- **셀 선택**: 단일 셀, 범위 선택, 전체 행/열 선택
- **키보드 내비게이션**: Tab, Enter, 화살표 키로 셀 이동

## 6단계: HTML 지원 및 보안 (3주)

### 6.1 HTML 태그 지원
- **기본 HTML**: `<div>`, `<span>`, `<p>`, `<h1>~<h6>` 등
- **서식 태그**: `<strong>`, `<em>`, `<u>`, `<del>` 등
- **목록 태그**: `<ul>`, `<ol>`, `<li>`
- **미디어 태그**: `<img>`, `<video>`, `<audio>` (기본적인 지원)

### 6.2 보안 처리
- **태그 화이트리스트**: 허용된 HTML 태그만 사용
- **속성 필터링**: 안전한 속성만 허용
- **XSS 방지**: 악성 스크립트 차단
- **URL 검증**: 링크 및 이미지 URL 검증

### 6.3 HTML ↔ 다른 형식 변환
- **HTML 출력**: 에디터 내용을 HTML로 변환
- **HTML 입력**: HTML을 에디터로 가져오기
- **정리 기능**: 불필요한 HTML 태그 제거 및 정리

## 7단계: 최적화 및 안정화 (3주)

### 7.1 성능 최적화
- **렌더링 최적화**: 변경된 부분만 다시 그리기
- **메모리 관리**: 불필요한 객체 해제
- **대용량 문서**: 긴 문서의 효율적 처리
- **번들 크기**: 라이브러리 크기 최소화

### 7.2 브라우저 호환성
- **모던 브라우저**: Chrome, Firefox, Safari, Edge 지원
- **모바일 브라우저**: iOS Safari, Android Chrome 최적화
- **터치 지원**: 모바일 터치 입력 최적화

### 7.3 에러 처리 및 안정성
- **입력 검증**: 잘못된 데이터 입력 처리
- **복구 메커니즘**: 예상치 못한 오류 시 안전한 상태 유지
- **디버그 모드**: 개발 시 디버깅 정보 제공

## 8단계: API 정리 및 문서화 (2주)

### 8.1 공개 API 설계
- **에디터 인스턴스**: 에디터 생성 및 제어
- **내용 조작**: 텍스트 삽입, 삭제, 서식 적용
- **이벤트 시스템**: 변경 사항 감지 및 콜백
- **설정 옵션**: 에디터 동작 커스터마이징

### 8.2 TypeScript 타입 정의
- **완전한 타입 지원**: 모든 API에 대한 타입 정의
- **제네릭 활용**: 유연한 타입 시스템
- **JSDoc**: 상세한 API 설명

### 8.3 사용 예제
- **기본 사용법**: 에디터 생성 및 기본 설정
- **고급 사용법**: 커스텀 설정 및 이벤트 처리
- **통합 예제**: React, Vue 등 프레임워크 통합

## 순수 에디터 라이브러리의 장점

### 명확한 책임 분리
- **에디터**: 문서 작성/편집 기능만 담당
- **애플리케이션**: 파일 저장, 사용자 관리, UI/UX, 협업 등

### 재사용성
- **다양한 프로젝트**: 여러 애플리케이션에서 동일한 에디터 사용
- **커뮤니티**: 오픈소스로 다른 개발자들도 활용 가능
- **확장성**: 필요에 따라 애플리케이션에서 기능 확장

### 유지보수성
- **단순한 구조**: 에디터 기능에만 집중하여 복잡도 감소
- **테스트**: 순수 기능만 테스트하면 되어 테스트 용이
- **버그 수정**: 문제 범위가 명확하여 디버깅 쉬움

## 예상 개발 기간: 총 4-5개월

이렇게 순수 에디터 라이브러리로 개발하면, 이후 이를 활용한 웹 애플리케이션 개발 시:
- **빠른 개발**: 에디터 부분은 완성되어 있어 UI/백엔드에만 집중
- **안정성**: 검증된 에디터 엔진 사용
- **차별화**: 독특한 나무위키+엑셀 표 기능으로 경쟁력 확보